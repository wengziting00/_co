## 1.not
AND(in, in) = in\
NAND(in, in) = NOT(in)\
è€å¸«ä¸Šèª²è¬›è§£


## 2.And
ç¬¬ä¸€æ­¥:
Nand(a=a, b=b, out=n);æŠŠè¼¸å…¥aå’Œbé€é€²Nandé–˜ï¼Œè¼¸å‡ºç‚ºn æœ‰1å³ç‚º0
| a | b | n (Nand è¼¸å‡º) |
|---|---|---|
| 0 | 0 | 1 |
| 0 | 1 | 1 |
| 1 | 0 | 1 |
| 1 | 1 | 0 |  |

ç¬¬äºŒæ­¥:
æŠŠä¸Šä¸€æ­¥çš„è¼¸å‡ºné€é€²ä¸€å€‹Noté–˜(éé–˜/åç›¸å™¨)ï¼Œè¼¸å‡ºå°±æ˜¯æœ€çµ‚çš„ out
|n(Nand è¼¸å‡º)|out(Not è¼¸å‡º)|
|---|---|
|1  |  0|
|1  |  0|
|1  |  0|
|0  |  1| |

åˆèµ·ä¾†å°±æ˜¯And é–˜çš„åŠŸèƒ½\
åƒè€ƒAI æœ‰çœ‹æ‡‚

## 3.Or
|a|b  |	na|	nb|na AND nb|	NAND(na,nb)|	æœ€çµ‚ out|
|--|--|---|---|---------|------------|---------|
|0 |	0|	1 |	1 |	1       |	0          |	0       |
|0 |	1|	1 |	0 |	0       |	1          |	1       |
|1 |	0|	0 |	1 |	0       |	1          |	1       |
|1 |	1|	0 |	0 |	0       |	1          |	1       | |

åƒè€ƒAIæœ‰çœ‹æ‡‚


## 4.Xor
|a|b|nab=Â¬(aâˆ§b) (Nand 1)|anb=Â¬(aâˆ§nab) (Nand 2)|bna=Â¬(bâˆ§nab) (Nand 3)|è¼¸å‡º out=Â¬(anbâˆ§bna) (Nand 4)|Xoré æœŸçµæœ|
|--|--|---|---|---------|------------|--------|
|0|0|Â¬(0âˆ§0)=1|Â¬(0âˆ§1)=1|Â¬(0âˆ§1)=1|Â¬(1âˆ§1)=0|0|
|0|1|Â¬(0âˆ§1)=1|Â¬(0âˆ§1)=1|Â¬(1âˆ§1)=0|Â¬(1âˆ§0)=1|1|
|1|0|Â¬(1âˆ§0)=1|Â¬(1âˆ§1)=0|Â¬(0âˆ§1)=1|Â¬(0âˆ§1)=1|1|
|1|1|Â¬(1âˆ§1)=0|Â¬(1âˆ§0)=1|Â¬(1âˆ§0)=1|Â¬(1âˆ§1)=0|0| |

åƒè€ƒAI çœ‹ä¸æ‡‚

## 5.Mxu
1. æº–å‚™Â¬sel(Not)\
   ç¨‹å¼ç¢¼ï¼šNot(in=sel, out=nsel)\
   ç›®çš„ï¼š è¨ˆç®—selçš„åå‘è¨Šè™Ÿnsel(Â¬sel)ï¼Œä½œç‚ºaè¼¸å…¥çš„é–‹é—œ\
   ç•¶ sel=0 æ™‚ï¼Œnsel=1(å…è¨±aé€šé)\
   ç•¶ sel=1 æ™‚ï¼Œnsel=0(é—œé–‰aé€šé“)
   
2. è™•ç†è¼¸å…¥ a(And 1)
   ç¨‹å¼ç¢¼ï¼š And(a=a, b=nsel, out=aPart)\
   å…¬å¼å°æ‡‰ï¼š aPart = a âˆ§ nsel\
   ä½œç”¨ï¼š é€™å€‹ And é–˜æ˜¯ä¸€å€‹ã€Œå—æ§é–‹é—œã€\
   ç•¶ sel=0 (nsel=1)ï¼š aPart = a âˆ§  aPart= a (a çš„å€¼è¢«å‚³é)\
   ç•¶ sel=1nsel=0)ï¼šaPart= a âˆ§ 0 aPart= 0 (a çš„å€¼è¢«é˜»æ–·ç‚º 0)
   
4. è™•ç†è¼¸å…¥ b (And 2)
ç¨‹å¼ç¢¼ï¼š And(a=b, b=sel, out=bPart)\
å…¬å¼å°æ‡‰ï¼š bPart= b âˆ§sel\
ä½œç”¨ï¼š é€™æ˜¯å¦ä¸€å€‹ã€Œå—æ§é–‹é—œã€\
ç•¶sel=0ï¼šbPart = b âˆ§ bPart= 0 (bçš„å€¼è¢«é˜»æ–·ç‚º 0)\
ç•¶sel=1ï¼šbPart = bâˆ§ bPart = bã€‚ (bçš„å€¼è¢«å‚³é)

5. çµ„åˆè¼¸å‡º (Or)
ç¨‹å¼ç¢¼ï¼š Or(a=aPart, b=bPart, out=out)\
å…¬å¼å°æ‡‰ï¼šout =aPart âˆ¨ bPart\
ä½œç”¨ï¼š å°‡é€™å…©å€‹ä¸­é–“çµæœ (aPar å’ŒbPart) é€²è¡Œ Or é‹ç®—ï¼Œå¾—åˆ°æœ€çµ‚è¼¸å‡ºã€‚ç”±æ–¼åœ¨ä»»ä½•æ™‚å€™ï¼ŒaPartå’Œ bPart åªæœ‰ä¸€å€‹å¯èƒ½ç­‰æ–¼in}çš„å€¼ï¼Œå¦ä¸€å€‹å¿…å®šæ˜¯ 0ï¼Œæ‰€ä»¥ Or} é‹ç®—ç¢ºä¿äº†è¼¸å‡ºout ç¸½æ˜¯ç­‰æ–¼è¢«é¸ä¸­çš„é‚£å€‹è¼¸å…¥

åƒè€ƒAIçœ‹ä¸æ‡‚

## 6.DMux
å…ˆæŠŠ sel åç›¸ï¼šNot\
ç”¨ in å’Œ NOT sel åš ANDï¼Œå¾—åˆ° a\
ç”¨ in å’Œ sel åš ANDï¼Œå¾—åˆ° b
åƒè€ƒAI æœ‰çœ‹æ‡‚

## 7.Halfadder
ä¸€å€‹åŠåŠ å™¨è² è²¬è¨ˆç®—å…©å€‹å–®ä¸€ä½å…ƒ ($a$ å’Œ $b$) çš„å’Œï¼Œæœƒç”¢ç”Ÿå…©å€‹è¼¸å‡ºï¼š\
Sum (å’Œ)ï¼šçµæœçš„æœ€ä½ä½ï¼ˆå³é‚Šçš„ä½å…ƒï¼‰\
Carry (é€²ä½)ï¼šçµæœçš„æœ€é«˜ä½ï¼ˆå·¦é‚Šçš„ä½å…ƒï¼‰
1. å’Œä½å…ƒ (Sum) çš„è¨ˆç®—Sumçš„å€¼æ˜¯ a å’Œ b ç›¸åŠ å¾Œï¼Œä¸å¸¶é€²ä½ çš„çµæœ
   
|a|b|a+b (åé€²ä½)|Sum (çµæœçš„æœ€ä½ä½)|
|--|--|---------|------------|
|0|0|0|0|
|0|1|1|1|
|1|0|1|1|
|1|1|2 (æˆ– 102â€‹)|0| |

è§€å¯ŸSum é€™ä¸€æ¬„ï¼šåªæœ‰ç•¶ aå’Œ b ä¸åŒ æ™‚ï¼Œè¼¸å‡ºæ‰æ˜¯ 1\
ç¨‹å¼ç¢¼ï¼š XOR(a=a, b=b, out=sum)\
2. é€²ä½ä½å…ƒ (Carry) çš„è¨ˆç®— Carry çš„å€¼æ˜¯a å’Œ b ç›¸åŠ å¾Œï¼Œæ˜¯å¦ç”¢ç”Ÿé€²ä½ çš„æ——æ¨™
|a|b|a+b (äºŒé€²ä½)|Carry (æ˜¯å¦é€²ä½)|
|--|--|---------|------------|
|0|0|002|0|
|0|1|012|0|
|1|0|012|0|
|1|1|102â€‹|1| |

è§€å¯Ÿ Carry é€™ä¸€æ¬„ï¼šåªæœ‰ç•¶ a å’Œb åŒæ™‚æ˜¯ 1 æ™‚ï¼Œè¼¸å‡ºæ‰æ˜¯ 1\
ç¨‹å¼ç¢¼ï¼š AND(a=a, b=b, out=carry)

## 8. FullAdder
1. ç¬¬ä¸€å€‹ Half Adderï¼ˆè¨ˆç®— $a + b$ï¼‰

ç¨‹å¼ç¢¼ï¼š HalfAdder(a=a, b=b, sum=s1, carry=c1)
åŠŸèƒ½ï¼šè¨ˆç®— $a$ å’Œ $b$ çš„å’Œ

è¼¸å‡ºä¸­é–“å’Œ s1ï¼ˆa âŠ• bï¼‰
è¼¸å‡ºç¬¬ä¸€å€‹é€²ä½ c1ï¼ˆa âŠ• bï¼‰

2. ç¬¬äºŒå€‹ Half Adderï¼ˆè¨ˆç®— $s1 + c$ï¼‰

ç¨‹å¼ç¢¼ï¼š HalfAdder(a=s1, b=c, sum=sum, carry=c2)
åŠŸèƒ½ï¼šè¨ˆç®—ä¸Šä¸€æ­¥çš„ä¸­é–“å’Œ $\mathbf{s1}$ å’Œè¼¸å…¥é€²ä½ $\mathbf{c}$ çš„å’Œ

$\mathbf{sum}$ è¼¸å‡ºï¼š
é€™å€‹çµæœå°±æ˜¯æœ€çµ‚çš„å’Œä½å…ƒï¼š
ä¸‰å€‹ä½å…ƒ $a,b,c$ çš„ç¸½å’Œä¹‹å³é‚Šé‚£ä¸€ä½\
sum=s1âŠ•c=(aâŠ•b)âŠ•c

$\mathbf{c2}$ è¼¸å‡ºï¼š
é€™æ˜¯ $s1$ å’Œ $c$ ç›¸åŠ ç”¢ç”Ÿçš„ç¬¬äºŒå€‹é€²ä½ã€‚

3. Or é–˜ï¼ˆè¨ˆç®—æœ€çµ‚é€²ä½ $\text{carry}$ï¼‰

ç¨‹å¼ç¢¼ï¼š Or(a=c1, b=c2, out=carry)
åŠŸèƒ½ï¼šæ±ºå®šæœ€çµ‚çš„é€²ä½è¼¸å‡º $\mathbf{carry}$ã€‚

$\mathbf{c1}$ï¼šä»£è¡¨ $a + b$ ç”¢ç”Ÿçš„é€²ä½

$\mathbf{c2}$ï¼šä»£è¡¨ $(a+b\text{ çš„å’Œ}) + c$ ç”¢ç”Ÿçš„é€²ä½

åªè¦ $c1$ æˆ– $c2$ æœ‰ä»»ä¸€å€‹ç‚º 1ï¼Œå°±æœƒç”¢ç”Ÿæœ€å¾Œçš„é€²ä½ï¼š\
carry=c1âˆ¨c2

## 9.And16
æŠŠ16å€‹å°ANDé–˜åˆ—å‡ºï¼Œæ¯ä¸€ä½å°æ‡‰ä¸€å€‹AND\
åƒè€ƒAI æœ‰çœ‹æ‡‚

## 10.Inc16
æœ€å³é‚Šï¼ˆLSBï¼‰åªéœ€ +1ï¼Œç”¨ HalfAdder(a, 1) \
å…¶ä»–å„ bit éƒ½æ˜¯\
è©² bit + å‰ä¸€ä½ carry + 0 ç”¨ FullAdder \
æœ€å·¦é‚Šçš„ carryï¼ˆignoreï¼‰ä¸è¼¸å‡º

## 11.ALU
ç¬¬ä¸€æ­¥ï¼šzx â†’ x = 0 æˆ– x ä¿æŒåŸæ¨£
Mux16(a=x, b=false, sel=zx, out=x_zeroed)\
sel = 0 â†’ è¼¸å‡º x\
sel = 1 â†’ è¼¸å‡º bï¼ˆå…¨ falseï¼‰â†’ 16 å€‹ 0\
â¡ ç¬¦åˆï¼š if (zx == 1) x = 0

ç¬¬äºŒæ­¥ï¼šnx â†’ æŠŠ x å–åæˆ–ä¿æŒåŸæ¨£
Not16(in=x_zeroed, out=x_not);
Mux16(a=x_zeroed, b=x_not, sel=nx, out=x_in);

sel = 0 â†’ è¼¸å‡ºåŸæœ¬çš„ x\
sel = 1 â†’ è¼¸å‡º !x\
â¡ ç¬¦åˆï¼š if (nx == 1) x = !x

å° y åšä¸€æ¨¡ä¸€æ¨£çš„æµç¨‹ï¼šzy, ny\
Mux16(a=y, b=false, sel=zy, out=y_zeroed);
Not16(in=y_zeroed, out=y_not);
Mux16(a=y_zeroed, b=y_not, sel=ny, out=y_in);
â¡ å®Œæ•´å¯¦ç¾ zy èˆ‡ ny çš„é‚è¼¯ã€‚

ç¬¬ä¸‰æ­¥ï¼šæ±ºå®šè¦ç®— AND é‚„æ˜¯ ADD\
Add16(a=x_in, b=y_in, out=x_plus_y);
And16(a=x_in, b=y_in, out=x_and_y);
Mux16(a=x_and_y, b=x_plus_y, sel=f, out=out_f);

f=0 â†’ AND\
f=1 â†’ ADD\
â¡ ç¬¦åˆï¼šif (f) out = x+y else out = x & y

ç¬¬å››æ­¥ï¼šæ˜¯å¦å–åè¼¸å‡ºï¼ˆnoï¼‰
Not16(in=out_f, out=out_not);
Mux16(a=out_f, b=out_not, sel=no, out=out[0..15], out=final_out); \
no=0 â†’ out = out_f\
no=1 â†’ out = !out_f\
æœ€å¾Œ out èˆ‡ final_out åŒæ­¥

ç¬¬äº”æ­¥ï¼šåˆ¤æ–·è¼¸å‡ºæ˜¯å¦ç‚ºè² ï¼ˆngï¼‰
And(a=final_out[15], b=true, out=ng); \
two's complement æ•¸çš„ MSB æ˜¯è² è™Ÿä½\
final_out[15] = 1 è¡¨ç¤º out < 0\
â¡ ç¬¦åˆï¼šng = (out < 0)

ğŸ”µ ç¬¬å…­æ­¥ï¼šåˆ¤æ–·æ˜¯å¦ç‚ºé›¶ï¼ˆzrï¼‰
Or8Way(in=final_out[0..7], out=or_a);
Or8Way(in=final_out[8..15], out=or_b);
Or(a=or_a, b=or_b, out=is_not_zero); 
Not(in=is_not_zero, out=zr);


æµç¨‹è§£é‡‹ï¼š\
æŠŠå‰ 8 bit åš OR â†’ çœ‹æ˜¯å¦æœ‰ä»»æ„ 1\
æŠŠå¾Œ 8 bit åš OR â†’ çœ‹æ˜¯å¦æœ‰ä»»æ„ 1\
å† OR ä¸€æ¬¡ â†’ çœ‹æ•´å€‹ 16 bits æ˜¯å¦ç‚º 0\
å–å â†’ å¦‚æœéƒ½æ²’æœ‰ 1 â†’ zr=1\
â¡ ç¬¦åˆï¼šzr = (out == 0 ? 1 : 0)

